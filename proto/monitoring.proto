syntax="proto3";
option go_package = "pmts/proto";
package monitoring;

service MonitoringService {
    rpc UploadSamples (UploadRequest) returns (UploadResponse);
    rpc GetMetrics (GetMetricsRequest) returns (GetMetricsResponse);
}


message Metric{
    string name = 1;
    map <string, string> labels = 2;
}

message Sample{
    int64 timestamp = 1;
    double value = 2;
}

message TimeSeries{
    Metric metric = 1;
    repeated Sample samples = 2;
}

message UploadRequest{
    repeated TimeSeries list = 1;
}

message UploadResponse{
    int32 stored_count = 1;
    string error = 2;
}

message GetMetricsRequest{
    string match_name = 1;
}

message GetMetricsResponse{
    repeated TimeSeries list = 1;
}